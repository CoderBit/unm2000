<section class="common-nbi-configuration">
  <form nz-form class="ant-advanced-search-form" [formGroup]="commonForm" (ngSubmit)="submitForm()">
    <nz-collapse [nzBordered]="true" class="mb-3 basic-configuration">
      <nz-collapse-panel nzHeader="{{translate.instant('Basic Configuration')}}" [nzActive]="true">
        <nz-spin [nzSpinning]="isSpinning">
          <div class="nz-collapse-data">
            <div nz-row [nzGutter]="24">
              <div nz-col [nzXl]="12" [nzXXl]="8">
                <nz-form-item nzFlex>
                  <nz-form-label>{{translate.instant('Get LP From Device')}}
                    <span nz-tooltip nzTitle="{{translate.instant('Get_Layers_Parameter_From_Device')}}">
                      <i nz-icon nzType="question" nzTheme="outline"></i>
                    </span>
                  </nz-form-label>
                  <nz-form-control nzErrorTip="Required!">
                    <nz-select formControlName="nbi_layer_param" nzPlaceHolder="Choose">
                      <nz-option nzValue="true" nzLabel="{{translate.instant('True')}}"></nz-option>
                      <nz-option nzValue="false" nzLabel="{{translate.instant('False')}}"></nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col [nzXl]="12" [nzXXl]="8">
                <nz-form-item nzFlex>
                  <nz-form-label>{{translate.instant('Read Slot State From Device')}}</nz-form-label>
                  <nz-form-control nzErrorTip="Required!">
                    <nz-select nzPlaceHolder="Choose" formControlName="read_slot_state">
                      <nz-option nzValue="1" nzLabel="{{translate.instant('True')}}"></nz-option>
                      <nz-option nzValue="0" nzLabel="{{translate.instant('False')}}"></nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
            <div nz-row [nzGutter]="24">
              <div nz-col [nzXl]="12" [nzXXl]="8">
                <nz-form-item nzFlex>
                  <nz-form-label>{{translate.instant('Port Display Mode')}} </nz-form-label>
                  <nz-form-control nzErrorTip="Required!">
                    <nz-select nzPlaceHolder="Choose" formControlName="port_display_mode">
                      <nz-option nzValue="0" nzLabel="{{translate.instant('protocol_name')}}"></nz-option>
                      <nz-option nzValue="1" nzLabel="{{translate.instant('physical_name')}}"></nz-option>
                      <nz-option nzValue="2" nzLabel="{{translate.instant('protocol_ph_name')}}"></nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col [nzXl]="12" [nzXXl]="8">
                <nz-form-item nzFlex>
                  <nz-form-label>{{translate.instant('native_name_type')}} </nz-form-label>
                  <nz-form-control nzErrorTip="Required!">
                    <nz-select nzPlaceHolder="Choose" formControlName="nativename_with_type_flag">
                      <nz-option nzValue="0" nzLabel="{{translate.instant('False')}}"></nz-option>
                      <nz-option nzValue="1" nzLabel="{{translate.instant('True')}}"></nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
          </div>
        </nz-spin>
      </nz-collapse-panel>
    </nz-collapse>

    <nz-collapse [nzBordered]="true" class="ftp-configuration">
      <nz-collapse-panel nzHeader="{{translate.instant('FTP Configuration')}}" [nzActive]="true">
        <nz-spin [nzSpinning]="isSpinning">
          <div class="nz-collapse-data">
            <div nz-row [nzGutter]="24">
              <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                  <nz-form-label>{{translate.instant('Type')}} </nz-form-label>
                  <nz-form-control nzErrorTip="Required!">
                    <nz-select formControlName="type" nzPlaceHolder="Choose" (ngModelChange)="onFtpTypeChange($event)">
                      <nz-option nzValue="ftp" nzLabel="{{translate.instant('FTP')}}"></nz-option>
                      <nz-option nzValue="sftp" nzLabel="{{translate.instant('SFTP')}}"></nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                  <nz-form-label nzRequired>{{translate.instant('IP')}}</nz-form-label>
                  <nz-form-control nzHasFeedback [nzErrorTip]="ipErrorTpl">
                    <input nz-input placeholder="0.0.0.0" formControlName="ip" style="padding-right: 11px;" />
                    <ng-template #ipErrorTpl let-control>
                      <ng-container *ngIf="control.hasError('pattern')">
                          {{translate.instant('IP format is incorrect!')}}
                      </ng-container>
                      <ng-container *ngIf="control.hasError('required')">
                          {{translate.instant('Required!')}}
                      </ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                  <nz-form-label nzRequired>{{translate.instant('Port')}} </nz-form-label>
                  <nz-form-control [nzErrorTip]="portErrorTpl">
                    <input nz-input placeholder="21" formControlName="port" />
                    <ng-template #portErrorTpl let-control>
                      <ng-container *ngIf="control.hasError('pattern')">
                          {{translate.instant('port_incorrect')}}
                      </ng-container>
                      <ng-container *ngIf="control.hasError('required')">
                          {{translate.instant('Required!')}}
                      </ng-container>
                    </ng-template>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
            <div nz-row [nzGutter]="24">
              <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                  <nz-form-label nzRequired>{{translate.instant('Username')}} </nz-form-label>
                  <nz-form-control nzErrorTip="{{translate.instant('username_req')}}">
                    <input nz-input  formControlName="user" />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                  <nz-form-label nzRequired>{{translate.instant('Password')}} </nz-form-label>
                  <nz-form-control nzErrorTip="{{translate.instant('password_req')}}">
                    <input nz-input type="password" placeholder="********" formControlName="pwd" />
                  </nz-form-control>
                </nz-form-item>
              </div>
              <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                  <nz-form-label>{{translate.instant('compress_type')}}</nz-form-label>
                  <nz-form-control nzErrorTip="Required!">
                    <nz-select formControlName="compressType" nzPlaceHolder="Choose">
                      <nz-option nzValue="0" nzLabel="{{translate.instant('ZIP')}}"></nz-option>
                      <nz-option nzValue="1" nzLabel="{{translate.instant('GZIP')}}"></nz-option>
                    </nz-select>
                  </nz-form-control>
                </nz-form-item>
              </div>
            </div>
          </div>
        </nz-spin>
      </nz-collapse-panel>
    </nz-collapse>
    <div nz-col [nzSpan]="24" class="search-area">
      <button nz-button [nzType]="'primary'" class="btn-b" [nzLoading]="isLoading">{{translate.instant('Save')}}</button>
      <button nz-button [nzType]="'primary'" class="btn-g ml-11" type="button" (click)="fetchData()">{{translate.instant('Reload')}}</button>
    </div>
  </form>
</section>
